<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Live Dashboard with 24-Hour Glow Flip Clock, Date, Particles & Break Marquee</title>
<style>
html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    background: #121212;
    font-family: 'Arial', sans-serif;
    color: white;
    overflow-x: hidden;
}

/* Particle container */
#tsparticles {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 0;
}

/* Top Bar */
.top-bar {
    position: relative;
    z-index: 1;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #1f1f1f;
    padding: 5px 20px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.5);
}
.top-bar h1 {
    margin: 0;
    font-size: 18px;
}

/* Flip Clock Container */
.flip-clock {
    display: flex;
    gap: 6px;
    align-items: center;
}
.flip-digit {
    position: relative;
    width: 50px;
    height: 65px;
    background: #222;
    border-radius: 6px;
    overflow: hidden;
    perspective: 1000px;
    box-shadow: 0 0 8px #00ffcc;
}
.flip-digit span {
    display: block;
    width: 100%;
    height: 100%;
    line-height: 65px;
    font-size: 28px;
    font-weight: bold;
    text-align: center;
    color: #00ffcc;
    background: #222;
    backface-visibility: hidden;
    position: absolute;
    top: 0;
    left: 0;
    transform-origin: top;
    text-shadow: 0 0 6px #00ffcc, 0 0 12px #00ffcc;
}
.flip-digit span.back {
    transform: rotateX(180deg);
}
.flip-digit.flip span.front {
    animation: flipFront 0.5s forwards;
}
.flip-digit.flip span.back {
    animation: flipBack 0.5s forwards;
}
@keyframes flipFront {
    0% { transform: rotateX(0deg); }
    100% { transform: rotateX(-180deg); }
}
@keyframes flipBack {
    0% { transform: rotateX(180deg); }
    100% { transform: rotateX(0deg); }
}
#today-date {
    font-size: 16px;
    color: #00ffcc;
    text-shadow: 0 0 6px #00ffcc, 0 0 12px #00ffcc;
    margin-bottom: 2px;
}

/* Marquee */
#breakMarquee {
    display: block;
    width: 100%;
    overflow: hidden;
    white-space: nowrap;
    color: #ffcc00;
    font-weight: bold;
    text-shadow: 0 0 6px #ffcc00, 0 0 12px #ffcc00;
    padding: 5px 0;
}

/* Dashboard */
.dashboard {
    position: relative;
    z-index: 1;
    display: flex;
    flex: 1;
    height: calc(100vh - 80px);
    gap: 15px;
    padding: 10px;
    justify-content: center;
}
.report-container {
    flex: 0 0 45%; 
    display: flex;
    flex-direction: column;
    background: rgba(31, 31, 31, 0.85);
    border-radius: 10px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.5);
    overflow: hidden;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    max-height: 700px; 
}
.report-container:hover {
    transform: scale(1.02);
    box-shadow: 0 6px 20px rgba(0,0,0,0.7);
}
iframe {
    border: none;
    width: 100%;
    height: 100%;
}
h2 {
    margin: 0;
    padding: 8px;
    background: rgba(0,0,0,0.8);
    color: #f0f0f0;
    font-size: 16px;
    text-align: center;
}

/* Responsive for tablets and phones */
@media (max-width: 900px) {
    .dashboard {
        flex-direction: column;
        height: auto;
        gap: 10px;
        padding: 10px;
        align-items: center;
    }
    .report-container {
        flex: 0 0 95%;
        max-height: 500px;
    }
    .flip-clock .flip-digit {
        width: 35px;
        height: 50px;
        font-size: 22px;
        line-height: 50px;
    }
    #today-date {
        font-size: 14px;
    }
    .top-bar {
        flex-direction: column;
        align-items: flex-start;
    }
}
</style>
</head>
<body>

<!-- Particle Background -->
<div id="tsparticles"></div>

<!-- Top Bar -->
<div class="top-bar">
    <h1>ðŸ“Š Live Dashboard</h1>
    <div>
        <div id="today-date"></div>
        <div class="flip-clock" id="flipClock"></div>
    </div>
</div>

<!-- Break Marquee -->
<div id="breakMarquee">Loading break data...</div>

<!-- Dashboard Reports -->
<div class="dashboard">
    <div class="report-container">
        <h2>ðŸ“Š Report 1</h2>
        <iframe 
            id="looker1"
            src="https://lookerstudio.google.com/embed/reporting/b91b3733-131d-41b1-9fd2-b4faff346716/page/B0VUF" 
            allowfullscreen>
        </iframe>
    </div>

    <div class="report-container">
        <h2>ðŸ“Š Report 2</h2>
        <iframe 
            id="looker2"
            src="https://lookerstudio.google.com/embed/reporting/21fc4ba8-58a5-4d84-b56d-ec0e74b8ae18/page/WfMUF" 
            allowfullscreen>
        </iframe>
    </div>
</div>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/tsparticles@2/tsparticles.bundle.min.js"></script>
<script>
// Particle background config
tsParticles.load("tsparticles", {
  fpsLimit: 60,
  background: { color: "transparent" },
  particles: {
    number: { value: 80, density: { enable: true, area: 800 } },
    color: { value: "#00ffcc" },
    shape: { type: "circle" },
    opacity: { value: 0.4, random: true },
    size: { value: 3, random: true },
    move: { enable: true, speed: 1, direction: "none", random: true, straight: false, outModes: { default: "out" } },
    links: { enable: true, distance: 150, color: "#00ffcc", opacity: 0.2, width: 1 }
  },
  interactivity: {
    events: { onHover: { enable: true, mode: "repulse" }, onClick: { enable: false } },
    modes: { repulse: { distance: 100 } }
  },
  detectRetina: true
});

// Auto-refresh reports every 15 minutes
function refreshReports() {
    const iframe1 = document.getElementById('looker1');
    iframe1.src = iframe1.src.split('?')[0] + '?t=' + new Date().getTime();
    const iframe2 = document.getElementById('looker2');
    iframe2.src = iframe2.src.split('?')[0] + '?t=' + new Date().getTime();
}
setInterval(refreshReports, 900000);

// Update Date
function updateDate() {
    const now = new Date();
    const options = { timeZone: 'Asia/Manila', weekday:'long', year:'numeric', month:'long', day:'numeric' };
    const dateStr = now.toLocaleDateString('en-PH', options);
    document.getElementById('today-date').textContent = dateStr;
}
setInterval(updateDate, 60000);
updateDate();

// Flip Clock Logic (HH:MM 24-hour)
function createFlipDigit() {
    const digit = document.createElement('div');
    digit.className = 'flip-digit';
    const front = document.createElement('span');
    front.className = 'front';
    front.textContent = '0';
    const back = document.createElement('span');
    back.className = 'back';
    back.textContent = '0';
    digit.appendChild(front);
    digit.appendChild(back);
    return digit;
}
const clockContainer = document.getElementById('flipClock');
const digits = [];
for(let i=0;i<4;i++){
    const digit = createFlipDigit();
    clockContainer.appendChild(digit);
    if(i===1){
        const colon = document.createElement('span');
        colon.textContent = ':';
        colon.style.margin = '0 2px';
        colon.style.fontSize = '28px';
        colon.style.color = '#00ffcc';
        colon.style.textShadow = '0 0 6px #00ffcc, 0 0 12px #00ffcc';
        clockContainer.appendChild(colon);
    }
    digits.push(digit);
}
function updateClock() {
    const now = new Date();
    let options = { timeZone: 'Asia/Manila', hour12: false, hour: '2-digit', minute: '2-digit' };
    let timeStr = now.toLocaleTimeString('en-PH', options);
    let hhmm = timeStr.replace(':','');
    for(let i=0;i<digits.length;i++){
        const digitEl = digits[i];
        const front = digitEl.querySelector('.front');
        const back = digitEl.querySelector('.back');
        if(front.textContent !== hhmm[i]){
            back.textContent = hhmm[i];
            digitEl.classList.add('flip');
            setTimeout(()=>{front.textContent = hhmm[i]; digitEl.classList.remove('flip');},500);
        }
    }
}
setInterval(updateClock,1000);
updateClock();

// Marquee Break Status
let lastMessage = "";
async function updateMarquee() {
    try {
        const res = await fetch("https://script.google.com/macros/s/AKfycbzdnk93O93WsyOGX1_9aGYn_bj8cxbQQkt3H1sNSN_qP-e8r8UVozgeg_gz_BOjlfRs/exec");
        const newMessage = await res.text();
        if (newMessage !== lastMessage) {
            document.getElementById("breakMarquee").textContent = newMessage;
            lastMessage = newMessage;
        }
    } catch(e) {
        document.getElementById("breakMarquee").textContent = "Error loading break data.";
        console.error(e);
    }
}
updateMarquee();
setInterval(updateMarquee, 30000); // every 30 sec
</script>

</body>
</html>
